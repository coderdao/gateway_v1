网络代理大纲
- 什么是网络代理
- http代理，重点详解
    - 正向代理
    - 方向

    - 负载轮询
    - 中间件支持
    - 限流、熔断、降级
    - 权限认证
    - 数据统计
- websocket代理
- tcp代理


# 什么是网络代理
用户通过代理请求信息
请求通过网络代理完成转发到达目标服务器
目标服务器相应后再通过网络代理回传给用户

https://zhuanlan.zhihu.com/p/56271931
https://blog.csdn.net/m0_47404181/article/details/107092503
https://www.php.cn/nginx/425693.html
https://www.jianshu.com/p/73c7e81de3a5

网络代理
用户不直接连接服务器，网络代理去连接。获取数据后返回给用户。

网络转发
是路由器对报文的转发操作，中间可能对数据包修改。


## 网络代理类型

https://zhuanlan.zhihu.com/p/69072041
https://www.cnblogs.com/Anker/p/6056540.html
https://cloud.tencent.com/developer/article/1418457
https://www.nginx.org.cn/article/detail/214
https://cloud.tencent.com/developer/article/1445474
https://www.cnblogs.com/taostaryu/p/10547132.html

## 正向代理
是一种客户端的代理技术，帮助客户端访问无法访问的服务资源，可以隐藏用户真实IP。比如∶浏览器web代理、VPN等n微信352852792

## 反向代理
是一种服务端的代理技术，帮助服务器做负载均衡、缓存、提供安全校验等，可以隐藏服务器真实IP。比如:LVS技术、nginx proxy_pass等

## 实现浏览器 正向代理过程
- 用户请求
- 代理服务器监听中
- 上游TCP连接
- 回调方法
- 拷贝请求数据    
- 请求下游服务 Transport RoundTrip
- 回写上游数据

### 实现浏览器 正向代理
运行代码： demo/proxy/forward_proxy/forward_proxy.go

浏览器设置： 打开计算机 代理设置
勾选 web 代理
设置代理服务器ip/端口：localhost:8080


## 如何实现一个反向代理
这个功能比较复杂，我们先实现一个简版http反向代理。
- 代理接收客户端请求，更改请求结构体信息。
- 通过一定的负载均衡算法获取下游服务地址。
- 把请求发送到下游服务器，并获取返回内容。
