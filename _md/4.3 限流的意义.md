# 中间件

## 解决问题
- 避免 if 狂魔
- 提高复用，隔离业务
- 切面编程、调用组合随意

## 中间件实现原理
- 类似洋葱操作

## 中间件代码实现
中间件一般都封装在路由上路由是URL请求分发的管理器中间件选型：
- 基于链表构建中间件 缺点：实现复杂，调用方式不灵活

- 使用数组构建中间件 控制灵活方便，推荐使用

## 实现思路
使用方法数组构建中间件-实现思路
- 方法组装
    - 构建中间件URL路由
    - 构建URL的中间件方法数组
    - 使用`use方法`整合路由与方法数组
- 方法调用
    - 构建方法请求逻辑
    - 封装http.Handler接口与http.Server整合
    


限流的意义
高并发系统三大利器：缓存、降级、限流缓存：提升系统访问速度和增大处理容量，为相应业务增加缓存。
降级：当服务器压力剧增时，根据业务策略降级，以此释放服务资源保证业务正常。